## nmap选项：

***TCP扫描***

* -Pn:扫描存活主机

* -sT:通过对每个端口进行tcp连接来确定端口是否存在。

  * 优点：精度高
  * 缺点：需要三次握手，速度慢

* -sS(SYN扫描)**使用频率最高**

  * 原理：SYN扫描也称半开连接，发送带有SYN标志位的数据包进行端口检测，如果主机回复SYN/ACK包，表示该端口处于开放状态，若回复RST/ACK包，表示该端口处于关闭状态，如果未响应或发送了ICMP unreachable信息则表明这个端口被屏蔽了。

  * 优点：由于没有进行三次握手连接，所以安全性（隐蔽性高),扫描速度快
  * Nmap默认使用的就是Ss

* 对控制位扫描：

  补充：

  SYN：同步标志位。

  ACK：确认数据包，对收到了数据包进行确认。

  RST：重置连接的标识位。

  FIN：完成标志位，完成并以正常方式关闭连接。

  PSH：告诉接收方应当把缓冲区的数据立即推送给应用程序，不需  要等待。

  * TCP NULL (-sN): 扫描不设置任何控制位
  * FIN (-sF): 扫描仅设置FIN标志位。
  * XMAS (-sX): 扫描设置FIN、PSH和URG标识位。
  * TCP ACK扫描：(-sA):检测目标主机哪些端口被防火墙屏蔽，数据包只有一个ACK标识位



**UDP扫描**

UDP扫描仅有一种扫描方式(-sU)

扫描速度慢，扫描结果可靠度低，没TCP高，但UDP端口代表着可能有很大价值的服务程序。

优化性能问题：可用—host-timeout跳过响应过慢的主机；



**端口选项**

 -p 端口范围：后接指定端口,若扫描1~2024号端口,则用 -p 1-2024

-F（快速扫描）：仅扫描常用的100个端口。

-r（顺序扫描）：按照从小到大的顺序进行端口扫描。



**输出选项**

 1.xml文件(-oX)

  例: nmap 192.168.96.4 -oX myscan.xml

//表示扫描目标主机结果保存至myscan.xml文件中

     xsltproc myscan.xml -o myscan.html
    
      //将myscan.xml的.xml文件转换成.html文件

2.扫描外部文件(-iL)

 例:nmap -iL 文件名


**其他常用选项**

1. 扫描速度

(-T):有-T1 -T2 -T3 -T4 -T5 -T6 依次速度越快。

  默认通常情况下无需选择扫描速度选项,除非想进行更隐匿或更快速的扫描，越快越容易被防火墙过滤或屏蔽，网络良好情况下T4足够。

2. 识别端口服务程序版本信息(-sV): nmap -sV 192.168.96.4
3. 识别操作系统(-O)大写的字母O：nmap -O 192.168.96.4
4. 禁用主机检测(-Pn),目标主机屏蔽了ping请求可用